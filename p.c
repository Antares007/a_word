#define P(arse) void arse(long a, long b, struct o_t *o)
typedef struct o_t {
  union {
    long q;
    unsigned long Q;
    void *v;
    const char *cs;
    P((*c));
  };
} o_t;
typedef P((*p_t));
P(Got) { o[b + 2].c(a, b + 3, o); }
P(God) { o[b + 1].c(a, b + 3, o); }
P(Gor) { o[b + 0].c(a, b + 3, o); }

P(utf_cp1) {
  o[a++].q = o[0].cs[o[2].q++];
  o[b + 1].c(a, b, o);
}
P(utf_cp2) {
  unsigned long b2 = o[0].cs[o[2].q++] & 0b00111111;
  unsigned long b1 = o[--a].Q;
  o[a++].Q = b1 << 6 | b2;
  o[b + 1].c(a, b, o);
}
P(utf_cp3) {
  unsigned long b3 = o[0].cs[o[2].q++] & 0b00111111;
  unsigned long b2 = o[--a].Q;
  unsigned long b1 = o[--a].Q;
  o[a++].Q = b1 << 12 | b2 << 6 | b3;
  o[b + 1].c(a, b, o);
}
P(utf_cp4) {
  unsigned long b4 = o[0].cs[o[2].q++] & 0b00111111;
  unsigned long b3 = o[--a].Q;
  unsigned long b2 = o[--a].Q;
  unsigned long b1 = o[--a].Q;
  o[a++].Q = b1 << 18 | b2 << 12 | b3 << 6 | b4;
  o[b + 1].c(a, b, o);
}
extern p_t middle_byte[];
P(utf_b2_1) {
  o[--b].c = Got, o[--b].c = utf_cp2, o[--b].c = Gor;
  o[a++].q = o[0].cs[o[2].q++] & 0b00011111;
  middle_byte[(unsigned char)o[0].cs[o[2].q]](a, b, o);
}
P(utf_bmo) {
  o[a++].q = o[0].cs[o[2].q++] & 0b00111111;
  middle_byte[(unsigned char)o[0].cs[o[2].q]](a, b, o);
}
P(utf_b3_1) {
  o[--b].c = Got, o[--b].c = utf_cp3, o[--b].c = Gor;
  o[--b].c = Got, o[--b].c = utf_bmo, o[--b].c = Gor;
  o[a++].q = o[0].cs[o[2].q++] & 0b00001111;
  middle_byte[(unsigned char)o[0].cs[o[2].q]](a, b, o);
}
P(utf_b4_1) {
  o[--b].c = Got, o[--b].c = utf_cp4, o[--b].c = Gor;
  o[--b].c = Got, o[--b].c = utf_bmo, o[--b].c = Gor;
  o[--b].c = Got, o[--b].c = utf_bmo, o[--b].c = Gor;
  o[a++].q = o[0].cs[o[2].q++] & 0b00000111;
  middle_byte[(unsigned char)o[0].cs[o[2].q]](a, b, o);
}
extern p_t starting_byte[];
P(utf) { starting_byte[(unsigned char)o[0].cs[o[2].q]](a, b, o); }
#include <stdio.h>
#include <string.h>
P(not ) { printf("not\n"); }
P(and) { printf("and %lx %ld\n", o[a - 1].q, o[a - 1].q); }
P(oor) { printf("oor\n"); }
int main() {
  o_t o[1024];
  long a = 0, b = 1024;
  const char *str = "áƒš";
  o[--b].c = not ;
  o[--b].c = and;
  o[--b].c = oor;
  o[a++].cs = str;
  o[a++].q = strlen(str);
  o[a++].q = 0;
  utf(a, b, o);
}
p_t starting_byte[] = {
    [0b00000000] = utf_cp1,  [0b00000001] = utf_cp1,  [0b00000010] = utf_cp1,
    [0b00000011] = utf_cp1,  [0b00000100] = utf_cp1,  [0b00000101] = utf_cp1,
    [0b00000110] = utf_cp1,  [0b00000111] = utf_cp1,  [0b00001000] = utf_cp1,
    [0b00001001] = utf_cp1,  [0b00001010] = utf_cp1,  [0b00001011] = utf_cp1,
    [0b00001100] = utf_cp1,  [0b00001101] = utf_cp1,  [0b00001110] = utf_cp1,
    [0b00001111] = utf_cp1,  [0b00010000] = utf_cp1,  [0b00010001] = utf_cp1,
    [0b00010010] = utf_cp1,  [0b00010011] = utf_cp1,  [0b00010100] = utf_cp1,
    [0b00010101] = utf_cp1,  [0b00010110] = utf_cp1,  [0b00010111] = utf_cp1,
    [0b00011000] = utf_cp1,  [0b00011001] = utf_cp1,  [0b00011010] = utf_cp1,
    [0b00011011] = utf_cp1,  [0b00011100] = utf_cp1,  [0b00011101] = utf_cp1,
    [0b00011110] = utf_cp1,  [0b00011111] = utf_cp1,  [0b00100000] = utf_cp1,
    [0b00100001] = utf_cp1,  [0b00100010] = utf_cp1,  [0b00100011] = utf_cp1,
    [0b00100100] = utf_cp1,  [0b00100101] = utf_cp1,  [0b00100110] = utf_cp1,
    [0b00100111] = utf_cp1,  [0b00101000] = utf_cp1,  [0b00101001] = utf_cp1,
    [0b00101010] = utf_cp1,  [0b00101011] = utf_cp1,  [0b00101100] = utf_cp1,
    [0b00101101] = utf_cp1,  [0b00101110] = utf_cp1,  [0b00101111] = utf_cp1,
    [0b00110000] = utf_cp1,  [0b00110001] = utf_cp1,  [0b00110010] = utf_cp1,
    [0b00110011] = utf_cp1,  [0b00110100] = utf_cp1,  [0b00110101] = utf_cp1,
    [0b00110110] = utf_cp1,  [0b00110111] = utf_cp1,  [0b00111000] = utf_cp1,
    [0b00111001] = utf_cp1,  [0b00111010] = utf_cp1,  [0b00111011] = utf_cp1,
    [0b00111100] = utf_cp1,  [0b00111101] = utf_cp1,  [0b00111110] = utf_cp1,
    [0b00111111] = utf_cp1,  [0b01000000] = utf_cp1,  [0b01000001] = utf_cp1,
    [0b01000010] = utf_cp1,  [0b01000011] = utf_cp1,  [0b01000100] = utf_cp1,
    [0b01000101] = utf_cp1,  [0b01000110] = utf_cp1,  [0b01000111] = utf_cp1,
    [0b01001000] = utf_cp1,  [0b01001001] = utf_cp1,  [0b01001010] = utf_cp1,
    [0b01001011] = utf_cp1,  [0b01001100] = utf_cp1,  [0b01001101] = utf_cp1,
    [0b01001110] = utf_cp1,  [0b01001111] = utf_cp1,  [0b01010000] = utf_cp1,
    [0b01010001] = utf_cp1,  [0b01010010] = utf_cp1,  [0b01010011] = utf_cp1,
    [0b01010100] = utf_cp1,  [0b01010101] = utf_cp1,  [0b01010110] = utf_cp1,
    [0b01010111] = utf_cp1,  [0b01011000] = utf_cp1,  [0b01011001] = utf_cp1,
    [0b01011010] = utf_cp1,  [0b01011011] = utf_cp1,  [0b01011100] = utf_cp1,
    [0b01011101] = utf_cp1,  [0b01011110] = utf_cp1,  [0b01011111] = utf_cp1,
    [0b01100000] = utf_cp1,  [0b01100001] = utf_cp1,  [0b01100010] = utf_cp1,
    [0b01100011] = utf_cp1,  [0b01100100] = utf_cp1,  [0b01100101] = utf_cp1,
    [0b01100110] = utf_cp1,  [0b01100111] = utf_cp1,  [0b01101000] = utf_cp1,
    [0b01101001] = utf_cp1,  [0b01101010] = utf_cp1,  [0b01101011] = utf_cp1,
    [0b01101100] = utf_cp1,  [0b01101101] = utf_cp1,  [0b01101110] = utf_cp1,
    [0b01101111] = utf_cp1,  [0b01110000] = utf_cp1,  [0b01110001] = utf_cp1,
    [0b01110010] = utf_cp1,  [0b01110011] = utf_cp1,  [0b01110100] = utf_cp1,
    [0b01110101] = utf_cp1,  [0b01110110] = utf_cp1,  [0b01110111] = utf_cp1,
    [0b01111000] = utf_cp1,  [0b01111001] = utf_cp1,  [0b01111010] = utf_cp1,
    [0b01111011] = utf_cp1,  [0b01111100] = utf_cp1,  [0b01111101] = utf_cp1,
    [0b01111110] = utf_cp1,  [0b01111111] = utf_cp1,  [0b10000000] = Gor,
    [0b10000001] = Gor,      [0b10000010] = Gor,      [0b10000011] = Gor,
    [0b10000100] = Gor,      [0b10000101] = Gor,      [0b10000110] = Gor,
    [0b10000111] = Gor,      [0b10001000] = Gor,      [0b10001001] = Gor,
    [0b10001010] = Gor,      [0b10001011] = Gor,      [0b10001100] = Gor,
    [0b10001101] = Gor,      [0b10001110] = Gor,      [0b10001111] = Gor,
    [0b10010000] = Gor,      [0b10010001] = Gor,      [0b10010010] = Gor,
    [0b10010011] = Gor,      [0b10010100] = Gor,      [0b10010101] = Gor,
    [0b10010110] = Gor,      [0b10010111] = Gor,      [0b10011000] = Gor,
    [0b10011001] = Gor,      [0b10011010] = Gor,      [0b10011011] = Gor,
    [0b10011100] = Gor,      [0b10011101] = Gor,      [0b10011110] = Gor,
    [0b10011111] = Gor,      [0b10100000] = Gor,      [0b10100001] = Gor,
    [0b10100010] = Gor,      [0b10100011] = Gor,      [0b10100100] = Gor,
    [0b10100101] = Gor,      [0b10100110] = Gor,      [0b10100111] = Gor,
    [0b10101000] = Gor,      [0b10101001] = Gor,      [0b10101010] = Gor,
    [0b10101011] = Gor,      [0b10101100] = Gor,      [0b10101101] = Gor,
    [0b10101110] = Gor,      [0b10101111] = Gor,      [0b10110000] = Gor,
    [0b10110001] = Gor,      [0b10110010] = Gor,      [0b10110011] = Gor,
    [0b10110100] = Gor,      [0b10110101] = Gor,      [0b10110110] = Gor,
    [0b10110111] = Gor,      [0b10111000] = Gor,      [0b10111001] = Gor,
    [0b10111010] = Gor,      [0b10111011] = Gor,      [0b10111100] = Gor,
    [0b10111101] = Gor,      [0b10111110] = Gor,      [0b10111111] = Gor,
    [0b11000000] = utf_b2_1, [0b11000001] = utf_b2_1, [0b11000010] = utf_b2_1,
    [0b11000011] = utf_b2_1, [0b11000100] = utf_b2_1, [0b11000101] = utf_b2_1,
    [0b11000110] = utf_b2_1, [0b11000111] = utf_b2_1, [0b11001000] = utf_b2_1,
    [0b11001001] = utf_b2_1, [0b11001010] = utf_b2_1, [0b11001011] = utf_b2_1,
    [0b11001100] = utf_b2_1, [0b11001101] = utf_b2_1, [0b11001110] = utf_b2_1,
    [0b11001111] = utf_b2_1, [0b11010000] = utf_b2_1, [0b11010001] = utf_b2_1,
    [0b11010010] = utf_b2_1, [0b11010011] = utf_b2_1, [0b11010100] = utf_b2_1,
    [0b11010101] = utf_b2_1, [0b11010110] = utf_b2_1, [0b11010111] = utf_b2_1,
    [0b11011000] = utf_b2_1, [0b11011001] = utf_b2_1, [0b11011010] = utf_b2_1,
    [0b11011011] = utf_b2_1, [0b11011100] = utf_b2_1, [0b11011101] = utf_b2_1,
    [0b11011110] = utf_b2_1, [0b11011111] = utf_b2_1, [0b11100000] = utf_b3_1,
    [0b11100001] = utf_b3_1, [0b11100010] = utf_b3_1, [0b11100011] = utf_b3_1,
    [0b11100100] = utf_b3_1, [0b11100101] = utf_b3_1, [0b11100110] = utf_b3_1,
    [0b11100111] = utf_b3_1, [0b11101000] = utf_b3_1, [0b11101001] = utf_b3_1,
    [0b11101010] = utf_b3_1, [0b11101011] = utf_b3_1, [0b11101100] = utf_b3_1,
    [0b11101101] = utf_b3_1, [0b11101110] = utf_b3_1, [0b11101111] = utf_b3_1,
    [0b11110000] = utf_b4_1, [0b11110001] = utf_b4_1, [0b11110010] = utf_b4_1,
    [0b11110011] = utf_b4_1, [0b11110100] = utf_b4_1, [0b11110101] = utf_b4_1,
    [0b11110110] = utf_b4_1, [0b11110111] = utf_b4_1, [0b11111000] = Gor,
    [0b11111001] = Gor,      [0b11111010] = Gor,      [0b11111011] = Gor,
    [0b11111100] = Gor,      [0b11111101] = Gor,      [0b11111110] = Gor,
    [0b11111111] = Gor,
};
p_t middle_byte[] = {
    [0b00000000] = Gor, [0b00000001] = Gor, [0b00000010] = Gor,
    [0b00000011] = Gor, [0b00000100] = Gor, [0b00000101] = Gor,
    [0b00000110] = Gor, [0b00000111] = Gor, [0b00001000] = Gor,
    [0b00001001] = Gor, [0b00001010] = Gor, [0b00001011] = Gor,
    [0b00001100] = Gor, [0b00001101] = Gor, [0b00001110] = Gor,
    [0b00001111] = Gor, [0b00010000] = Gor, [0b00010001] = Gor,
    [0b00010010] = Gor, [0b00010011] = Gor, [0b00010100] = Gor,
    [0b00010101] = Gor, [0b00010110] = Gor, [0b00010111] = Gor,
    [0b00011000] = Gor, [0b00011001] = Gor, [0b00011010] = Gor,
    [0b00011011] = Gor, [0b00011100] = Gor, [0b00011101] = Gor,
    [0b00011110] = Gor, [0b00011111] = Gor, [0b00100000] = Gor,
    [0b00100001] = Gor, [0b00100010] = Gor, [0b00100011] = Gor,
    [0b00100100] = Gor, [0b00100101] = Gor, [0b00100110] = Gor,
    [0b00100111] = Gor, [0b00101000] = Gor, [0b00101001] = Gor,
    [0b00101010] = Gor, [0b00101011] = Gor, [0b00101100] = Gor,
    [0b00101101] = Gor, [0b00101110] = Gor, [0b00101111] = Gor,
    [0b00110000] = Gor, [0b00110001] = Gor, [0b00110010] = Gor,
    [0b00110011] = Gor, [0b00110100] = Gor, [0b00110101] = Gor,
    [0b00110110] = Gor, [0b00110111] = Gor, [0b00111000] = Gor,
    [0b00111001] = Gor, [0b00111010] = Gor, [0b00111011] = Gor,
    [0b00111100] = Gor, [0b00111101] = Gor, [0b00111110] = Gor,
    [0b00111111] = Gor, [0b01000000] = Gor, [0b01000001] = Gor,
    [0b01000010] = Gor, [0b01000011] = Gor, [0b01000100] = Gor,
    [0b01000101] = Gor, [0b01000110] = Gor, [0b01000111] = Gor,
    [0b01001000] = Gor, [0b01001001] = Gor, [0b01001010] = Gor,
    [0b01001011] = Gor, [0b01001100] = Gor, [0b01001101] = Gor,
    [0b01001110] = Gor, [0b01001111] = Gor, [0b01010000] = Gor,
    [0b01010001] = Gor, [0b01010010] = Gor, [0b01010011] = Gor,
    [0b01010100] = Gor, [0b01010101] = Gor, [0b01010110] = Gor,
    [0b01010111] = Gor, [0b01011000] = Gor, [0b01011001] = Gor,
    [0b01011010] = Gor, [0b01011011] = Gor, [0b01011100] = Gor,
    [0b01011101] = Gor, [0b01011110] = Gor, [0b01011111] = Gor,
    [0b01100000] = Gor, [0b01100001] = Gor, [0b01100010] = Gor,
    [0b01100011] = Gor, [0b01100100] = Gor, [0b01100101] = Gor,
    [0b01100110] = Gor, [0b01100111] = Gor, [0b01101000] = Gor,
    [0b01101001] = Gor, [0b01101010] = Gor, [0b01101011] = Gor,
    [0b01101100] = Gor, [0b01101101] = Gor, [0b01101110] = Gor,
    [0b01101111] = Gor, [0b01110000] = Gor, [0b01110001] = Gor,
    [0b01110010] = Gor, [0b01110011] = Gor, [0b01110100] = Gor,
    [0b01110101] = Gor, [0b01110110] = Gor, [0b01110111] = Gor,
    [0b01111000] = Gor, [0b01111001] = Gor, [0b01111010] = Gor,
    [0b01111011] = Gor, [0b01111100] = Gor, [0b01111101] = Gor,
    [0b01111110] = Gor, [0b01111111] = Gor, [0b10000000] = God,
    [0b10000001] = God, [0b10000010] = God, [0b10000011] = God,
    [0b10000100] = God, [0b10000101] = God, [0b10000110] = God,
    [0b10000111] = God, [0b10001000] = God, [0b10001001] = God,
    [0b10001010] = God, [0b10001011] = God, [0b10001100] = God,
    [0b10001101] = God, [0b10001110] = God, [0b10001111] = God,
    [0b10010000] = God, [0b10010001] = God, [0b10010010] = God,
    [0b10010011] = God, [0b10010100] = God, [0b10010101] = God,
    [0b10010110] = God, [0b10010111] = God, [0b10011000] = God,
    [0b10011001] = God, [0b10011010] = God, [0b10011011] = God,
    [0b10011100] = God, [0b10011101] = God, [0b10011110] = God,
    [0b10011111] = God, [0b10100000] = God, [0b10100001] = God,
    [0b10100010] = God, [0b10100011] = God, [0b10100100] = God,
    [0b10100101] = God, [0b10100110] = God, [0b10100111] = God,
    [0b10101000] = God, [0b10101001] = God, [0b10101010] = God,
    [0b10101011] = God, [0b10101100] = God, [0b10101101] = God,
    [0b10101110] = God, [0b10101111] = God, [0b10110000] = God,
    [0b10110001] = God, [0b10110010] = God, [0b10110011] = God,
    [0b10110100] = God, [0b10110101] = God, [0b10110110] = God,
    [0b10110111] = God, [0b10111000] = God, [0b10111001] = God,
    [0b10111010] = God, [0b10111011] = God, [0b10111100] = God,
    [0b10111101] = God, [0b10111110] = God, [0b10111111] = God,
    [0b11000000] = Gor, [0b11000001] = Gor, [0b11000010] = Gor,
    [0b11000011] = Gor, [0b11000100] = Gor, [0b11000101] = Gor,
    [0b11000110] = Gor, [0b11000111] = Gor, [0b11001000] = Gor,
    [0b11001001] = Gor, [0b11001010] = Gor, [0b11001011] = Gor,
    [0b11001100] = Gor, [0b11001101] = Gor, [0b11001110] = Gor,
    [0b11001111] = Gor, [0b11010000] = Gor, [0b11010001] = Gor,
    [0b11010010] = Gor, [0b11010011] = Gor, [0b11010100] = Gor,
    [0b11010101] = Gor, [0b11010110] = Gor, [0b11010111] = Gor,
    [0b11011000] = Gor, [0b11011001] = Gor, [0b11011010] = Gor,
    [0b11011011] = Gor, [0b11011100] = Gor, [0b11011101] = Gor,
    [0b11011110] = Gor, [0b11011111] = Gor, [0b11100000] = Gor,
    [0b11100001] = Gor, [0b11100010] = Gor, [0b11100011] = Gor,
    [0b11100100] = Gor, [0b11100101] = Gor, [0b11100110] = Gor,
    [0b11100111] = Gor, [0b11101000] = Gor, [0b11101001] = Gor,
    [0b11101010] = Gor, [0b11101011] = Gor, [0b11101100] = Gor,
    [0b11101101] = Gor, [0b11101110] = Gor, [0b11101111] = Gor,
    [0b11110000] = Gor, [0b11110001] = Gor, [0b11110010] = Gor,
    [0b11110011] = Gor, [0b11110100] = Gor, [0b11110101] = Gor,
    [0b11110110] = Gor, [0b11110111] = Gor, [0b11111000] = Gor,
    [0b11111001] = Gor, [0b11111010] = Gor, [0b11111011] = Gor,
    [0b11111100] = Gor, [0b11111101] = Gor, [0b11111110] = Gor,
    [0b11111111] = Gor,
};
